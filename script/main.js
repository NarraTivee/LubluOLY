document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});

document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && (e.key === 'c' || e.key === 'C')) {
        e.preventDefault();
    }
});

const messages = [
"Жмакай где угодно после каждого сообщения <3",  
"Олечка ❤️",  
"Я хочу тебе сказать, чтооо",  
"Попробуй нажать",  
"Нажми еще раз",  
"Давай, не сдавайся, нажимай",  
"Обещаю, это последний раз",  
"Серьезно",  
"Это",  
"Последний",  
"хехе",  
"Я знаю, ты уже злишься",  
"Хмм",  
"Вот мое дополнение к подарку, надеюсь это порадует тебя ❤️",  
"А ведь я помню ту самую дату! 10 декабря 2024 года стал для меня особенным днем, который навсегда останется в памяти. В тот  вечер я  написал тебе в инстаграм с твинка, просто хотелось познакомится , просто понравилась внешне, показалась очень милой девочкой, конечно не могу не сказать про то, что твоя красота меня задела первым делом. Помню как наблюдал за тобой, достаточно не малое количество времени, помню как смотрел твою фамилию в книжке по физике, ахахха, был момент, который я не рассказывал.",  
"Мы приходили на перемене и заходили в ваш класс , клали вещи и шли на коридор. Мне казалось, что был тебе интересен, ибо я до сих пор помню тот взгляд на меня, пока ты шла к альтухе с рюкзаком)) Так вот, я написал в тетради , что то типо (Олька, пиши юз :D) и оставил ручку на той странице, на самом деле ни на что не надеялся, просто ждал, мол вдруг ты увидишь, но этого не случилось, нечего страшного.",  
"Я просматривал твой инст и ТТ, помню как говорю рыжему (Прикинь, так девочка понравилась с 9 класса) и показал твою фотку с лицом с публикаций инсты или актуальных. Тогда он еще ответил, что я запал на малолетку :DD И ДАААА, это был определенно ФАКТ, ЕМАЕ!",  
"Мы часто сталкивались, то Настя тебя пихнула, то просто я выходил с вашего кабинета и видел твой взгляд на мне, да ты даже не запоминала эти моменты, зато я обращал на это внимание))  Когда наши взгляды встречались, то время как будто замирало, реально. Я не мог отвести глаз от твоего взгляда — в нём читалась нежность и загадка, которая манила меня. После твоего ответа в инсте и нашего небольшого общения, может я и не очень правильно и интересно представил себя и информацию обо мне, ну уже как есть)",  
"И тогда я понял, что эта встреча не случайна. Еще когда ты принесла мне зарядку, тот день я также отлично запомнил, не знаю, почему повел тебя домой, такого никогда не было и даже мыслей таких никогда не появлялось, честно, когда вел тебя то не было мыслей типо поцеловать или еще чего то, реально. Но пока мы сидели там, то в один момент , не думаю даже, я решил действовать иии поцеловал, ахахах)) Было неожиданно, но приятно ❤️",
"Наверное это был один из ключевых моментов перед отношениями. Как же мне нравятся твои слова и мысли (Если я захочу, он будет моим). Я хотел быть ТВОИМ и ТОЛЬКО", 
"Мы смеялись, делились историями и мечтами, очень легко находили общие темы для разговоров, не было никакого затишься и тд, и вскоре я понял, что хочу узнать тебя лучше. Все следующие дни я не мог избавиться от мысли о тебе, хотелось еще раньше предложить, но показалось, что будет слишком рано, походу это любовь с первого взгляда, и уже 17 декабря 2024 года мы сделали шаг вперёд — начали встречаться. Это был тот самый момент, когда два сердца соединились, и я знал, что впереди нас ждут удивительные приключения.",
"Теперь, оглядываясь назад на тот волшебный день, я понимаю, что именно тогда началась наша история — история о любви, которая зажигает огни в сердце и наполняет жизнь смыслом. Твои шоколадные глаза стали моим вдохновением и источником счастья. Теперь это мои самые любимые глаза и никаких других даже видеть не хочу! Я знаю, что безумно боюсь потерять все это, я уже говорил, но ты правда самое ценное, что есть у меня, ты такая идеальная, может не для всех, но для меня точно, я не нашёл ни одного минуса, вообще ноль, ну будто не бывает так..",
"Походу бывает, так хочется давать взаимность, быть таким же, какая ты для меня. С тобой я чувствую себя счастливым, чувствую себя ребёнком, когда видишь твой взгляд на себе, видишь как сверкают глаза, то понимаешь, как сильно ты меня любишь ❤️ Я искренни ценю тебя и уже точно могу сказать, что боюсь потерять. Мне так комфортно, интересно, весело и спокойно только с тобой, чувствую себя любимым и нужным, спасибо тебе за это, моя бусинка ❤️",
"Так люблю тебя рядом с тобой, я чувствую себя живым, ты для меня больше чем девушка, ты моё счастье и я постараюсь укрыть твоё сердце от бед, я согрею твои руки от мороза, буду бороться за тебя, лишь бы только была моя и смотрела всегда с искрой, постараюсь забрать твою боль, лишь мы были вместе.",
"Лучше подарка мне подарить просто не могли. всегда тебя радовать и всегда ВСЕГДА БУДУ РЯДОМ, чтобы тебе не было грустно, нету слов чтобы описать мою любовь к тебе, она безгранична, я так привязался, не могу без тебя уже ❤️",
"Спасибо тебе, что встретилась в моей жизни, я благодарен за эту всему свету! Сейчас ты являешься той кого я поистине сильно люблю и с нетерпением жду , когда сможем провести время вместе, спасибо тебе ❤️",
"Надеюсь было приятно увидеть, услышать и прочитать данный подарок сделанный своими руками специально для тебя. Люблю тебя очень сильно, моя девочка, моя бусинка ❤️"
];

let currentPage = 0;
let isLastPage = false;

function showMessage() {
    $('.message').text(messages[currentPage]);
    
    isLastPage = currentPage === messages.length - 1;
    
    if (isLastPage) {
        $('.next-button').show();
        $('.bg_heart').css('cursor', 'default');
    } else {
        $('.next-button').hide();
        $('.bg_heart').css('cursor', 'pointer');
    }
}

$('.bg_heart').on('click', function() {
    if (!isLastPage) {
        currentPage++;
        showMessage();
    }
});

var love = setInterval(function() {
    var r_num = Math.floor(Math.random() * 40) + 1;
    var r_size = Math.floor(Math.random() * 65) + 10;
    var r_left = Math.floor(Math.random() * 100) + 1;
    var r_bg = Math.floor(Math.random() * 25) + 100;
    var r_time = Math.floor(Math.random() * 5) + 5;
    
    $('.bg_heart').append("<div class='heart' style='width:" + r_size + "px;height:" + r_size + "px;left:" + r_left + "%;background:rgba(255," + (r_bg - 25) + "," + r_bg + ",1);animation:love " + r_time + "s ease'></div>");
    
    $('.bg_heart').append("<div class='heart' style='width:" + (r_size - 10) + "px;height:" + (r_size - 10) + "px;left:" + (r_left + r_num) + "%;background:rgba(255," + (r_bg - 25) + "," + (r_bg + 25) + ",1);animation:love " + (r_time + 5) + "s ease'></div>");
    
    $('.heart').each(function() {
        var top = parseFloat($(this).css("top"));
        var width = parseFloat($(this).css("width"));
        if (top <= -100 || width >= 150) {
            $(this).remove();
        }
    });
}, 500);

showMessage();

function clearMusicState() {
    localStorage.removeItem('musicPlaying');
    localStorage.removeItem('musicCurrentTime');
}

window.onload = function() {
    clearMusicState(); 
}

function setupMusic() {
    const music = document.getElementById('backgroundMusic');
    
    if (!localStorage.getItem('initialLoad')) {
        clearMusicState();
        localStorage.setItem('initialLoad', 'true');
        music.currentTime = 0;
    }

    const isMusicPlaying = localStorage.getItem('musicPlaying') === 'true';
    const musicCurrentTime = localStorage.getItem('musicCurrentTime') || 0;

    if (isMusicPlaying) {
        music.currentTime = parseFloat(musicCurrentTime);
        music.play().catch(error => console.log('Playback failed', error));
    }

    music.addEventListener('play', () => {
        localStorage.setItem('musicPlaying', 'true');
    });

    music.addEventListener('pause', () => {
        localStorage.setItem('musicPlaying', 'false');
    });

    setInterval(() => {
        localStorage.setItem('musicCurrentTime', music.currentTime);
    }, 1000);

    document.addEventListener('click', function startMusic() {
        music.play().catch(error => {
            console.log('Autoplay prevented', error);
        });
        document.removeEventListener('click', startMusic);
    });
}

document.addEventListener('DOMContentLoaded', setupMusic);